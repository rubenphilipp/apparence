<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1" />
<link rel="stylesheet" href="./robodoc.css" type="text/css" />
<script src="./robodoc.js"></script>
<title>image.lisp</title>
<!-- Source: ./src/image.lisp -->
<!-- Generated with ROBODoc Version 4.99.44 (Nov 13 2022) -->
</head>
<body>
<div id="logo">
<a name="robo_top_of_doc"></a>
</div> <!-- logo -->
<div id="navigation">
<a class="menuitem" href="./toc_index.html#top">Table of Contents</a>
<a class="menuitem" href="./robo_sourcefiles.html#top">Sourcefiles</a>
<a class="menuitem" href="./masterindex.html#top">Index</a>
<a class="menuitem" href="./robo_generics.html#top">Generics</a>
<a class="menuitem" href="./robo_classes.html#top">Classes</a>
<a class="menuitem" href="./robo_functions.html#top">Functions</a>
<a class="menuitem" href="./robo_modules.html#top">Modules</a>
<a class="menuitem" href="./robo_methods.html#top">Methods</a>
<a class="menuitem" href="./robo_variables.html#top">Variables</a>
</div> <!-- navigation -->
<div id="content">
<hr />
<a name="apr2fimage"></a>
<a name="robo11"></a><h2>apr/image [ Classes ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="./robo_classes.html#robo_top_of_doc">Classes</a> ]</p>
<p class="item_name">NAME</p>
<pre> <strong>image</strong>
</pre>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2024-02-29
</pre>
<p class="item_name">PURPOSE</p>
<pre> Implementation of the <strong>image</strong> class. This class holds in its data-slot
 an <a href="./imago_lisp.html#robo2">imago</a>::<strong>image</strong> and provides an interface for accessing relevant attributes.

 NB: This abstraction of the <a href="./imago_lisp.html#robo2">imago</a>::<strong>image</strong> class is necessary in order to
     provide convenient facilities of referencing images (e.g. to hanbdle
     computing ressources economically when working with a large amount of
     images).

 CLASS HIERARCHY
 <a href="./named-object_lisp.html#robo13">named-object</a> -&gt; <strong>image</strong>

 $$ Last modified:  16:39:30 Wed Apr 24 2024 CEST
</pre>

<hr />
<a name="image2fcopy"></a>
<a name="robo43"></a><h2>image/copy [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo11">image</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2024-03-01
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This method copies a rectangular region from the src <a href="#robo11">image</a> to the dest
 <a href="#robo11">image</a> (cf. <a href="./imago_lisp.html#robo2">imago</a>::<strong>copy</strong>). Then no width or height are given, the complete
 <a href="#robo11">image</a> will be copied.
 NB: Both images must be large enough to contain the specified region at the
 given positions (cf. <a href="./imago_lisp.html#robo2">imago</a>::<strong>copy</strong>). 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - The destination <a href="#robo11">image</a> object.
 - The source <a href="#robo11">image</a> object. 
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword-arguments:
 - :dest-x. A number indicating the x-coordinate of the position on the
   destination <a href="#robo11">image</a>. Default = 0
 - :dest-y. A number indicating the y-coordinate of the position on the
   destination <a href="#robo11">image</a>. Default = 0
 - :src-x. A number indicating the x-coordinate on the src <a href="#robo11">image</a>. Default = 0
 - :src-y. A number indicating the y-coordinate on the src <a href="#robo11">image</a>. Default = 0
 - :width. The width of the region to cut out from the src-<a href="#robo11">image</a>. When NIL,
   the complete width of the src-<a href="#robo11">image</a> will be used.
 - :height. The height of the region to cut out from the src-<a href="#robo11">image</a>. When NIL,
   the complete height of the src-<a href="#robo11">image</a> will be used. 
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The (modified) dest <a href="#robo11">image</a> object. 
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((img1 (<a href="#robo47">make-rgb-image</a> 200 300))
(img2 (<a href="#robo47">make-rgb-image</a> 30 30 :initial-color (make-color 20 90 111))))
(<strong>copy</strong> img1 img2 :height 10 :width 10
:dest-x 20 :dest-y 25))
;;; =&gt;
IMAGE: width: 200, height: 300
NAMED-OBJECT: id: NIL, tag: NIL, 
data: #&lt;RGB-IMAGE (200x300) {7006D1DCB3}&gt;
**********
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>copy</strong> ((dest <a href="#robo11">image</a>) (src <a href="#robo11">image</a>)
                 &amp;key
                   (dest-x 0)
                   (dest-y 0)
                   (src-x 0)
                   (src-y 0)
                   width height)
</pre>

<hr />
<a name="image2fmake2dimage"></a>
<a name="robo44"></a><h2>image/make-image [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo11">image</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2024-02-29
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This function instantiates an <a href="#robo11">image</a> object from the given data. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - An <a href="./imago_lisp.html#robo2">imago</a>::<a href="#robo11">image</a> object. 
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword-arguments:
 - :id. The id of the <a href="#robo11">image</a> object.
 - :default-interpolation. The default interpolation method (used e.g. when
   changing the <a href="#robo11">image</a> dimensions via the (setf ...) methods.
   Default = (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-interpolation)
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> An <a href="#robo11">image</a> object. 
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>make-image</strong> (data &amp;key id
                          (default-interpolation
                           (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-interpolation)))
</pre>

<hr />
<a name="image2fmake2dimage2dfrom2dfile"></a>
<a name="robo45"></a><h2>image/make-image-from-file [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo11">image</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2024-02-29
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This function makes an <a href="#robo11">image</a> object from an <a href="#robo11">image</a> file.
 Currently supported are png and jpg/jpeg images. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> The path to the <a href="#robo11">image</a> file. 
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> - :id. The id of the new <a href="#robo11">image</a> object.
 - :default-interpolation. The default interpolation method (used e.g. when
   changing the <a href="#robo11">image</a> dimensions via the (setf ...) methods.
   Default = (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-interpolation)
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The new <a href="#robo11">image</a> object. 
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>make-image-from-file</strong> (path &amp;key
                              id
                              (default-interpolation
                               (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-interpolation)))
</pre>

<hr />
<a name="image2fmake2dimage2dfrom2dsvg"></a>
<a name="robo46"></a><h2>image/make-image-from-svg [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo11">image</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2024-03-04
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This method creates an <a href="#robo11">image</a> object from a cl-<a href="./svg_lisp.html#robo7">svg</a>::<a href="./svg_lisp.html#robo7">svg</a>-toplevel object
 (cf. <a href="./svg_lisp.html#robo_top_of_doc">svg.lisp</a>). 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> The cl-<a href="./svg_lisp.html#robo7">svg</a>::<a href="./svg_lisp.html#robo7">svg</a>-toplevel object.
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword-arguments:
 - :id. The id of the new <a href="#robo11">image</a> object.
 - :width. The width of the <a href="#robo11">image</a> (in px). Cf. <a href="./svg_lisp.html#robo64">svg-&gt;png</a>.
 - :height. The height of the <a href="#robo11">image</a> (in px). Cf. <a href="./svg_lisp.html#robo64">svg-&gt;png</a>.
 - :tmp-dir. A path to a directory where the temp-files are stored.
   Default = (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-tmp-dir)
 - :default-interpolation. The default interpolation method (used e.g. when
   changing the <a href="#robo11">image</a> dimensions via the (setf ...) methods.
   Default = (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-interpolation)
</pre>
<p class="item_name">RETURN VALUE</p>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((<a href="./canvas_lisp.html#robo9">canvas</a> (cl-<a href="./svg_lisp.html#robo7">svg</a>::<a href="./svg_lisp.html#robo63">make-svg-toplevel</a> 'cl-<a href="./svg_lisp.html#robo7">svg</a>:<a href="./svg_lisp.html#robo7">svg</a>-1.1-toplevel
:width 400
:height 300))
(<a href="#robo11">image</a> nil))
(cl-<a href="./svg_lisp.html#robo7">svg</a>:draw <a href="./canvas_lisp.html#robo9">canvas</a>
(:rect :x 10 :y 10
:width 100 :height (* 100 4/3)
:fill "rgba(90,90,90,1)"))
(setf <a href="#robo11">image</a> (<strong>make-image-from-svg</strong> <a href="./canvas_lisp.html#robo9">canvas</a>))
(<a href="#robo51">write-png</a> <a href="#robo11">image</a> :outfile "/tmp/<a href="#robo11">image</a>.png")
(<a href="./utilities_lisp.html#robo87">system-open-file</a> "/tmp/<a href="#robo11">image</a>.png"))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>make-image-from-svg</strong> (<a href="./svg_lisp.html#robo7">svg</a> &amp;key
                                  id
                                  width
                                  height
                                  (tmp-dir (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-tmp-dir))
                                  (default-interpolation
                                   (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-interpolation)))
</pre>

<hr />
<a name="image2fmake2drgb2dimage"></a>
<a name="robo47"></a><h2>image/make-rgb-image [ Functions ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo11">image</a> ] [ <a href="./robo_functions.html#robo_top_of_doc">Functions</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2024-02-29
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This function creates a new <a href="./imago_lisp.html#robo2">imago</a>::rgb-<a href="#robo11">image</a>. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - the width of the <a href="#robo11">image</a>
 - the height of the <a href="#robo11">image</a>
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword-arguments:
 - :initial-color. The initial/background color of the new rgb-<a href="#robo11">image</a>.
   Default = (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-rgb)
 - :id. The id of the new <a href="#robo11">image</a> object.
 - :default-interpolation. The default interpolation method (used e.g. when
   changing the <a href="#robo11">image</a> dimensions via the (setf ...) methods.
   Default = (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-interpolation)
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The new <a href="#robo11">image</a> object. 
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defun <strong>make-rgb-image</strong> (width height
                       &amp;key
                         (initial-color
                          (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-rgb))
                         id
                         (default-interpolation
                          (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-interpolation)))
</pre>

<hr />
<a name="image2fresize"></a>
<a name="robo48"></a><h2>image/resize [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo11">image</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2024-03-01
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This method resizes an <a href="#robo11">image</a> object to the new dimensions. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - The <a href="#robo11">image</a> object.
 - A number representing the new height (px).
 - A number representing the new width (px). 
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword-arguments:
 - :interpolation. The interpolation method to be used for altering the
   dimensions. Default = (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-interpolation)
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The modified <a href="#robo11">image</a> object. 
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((img (<a href="#robo47">make-rgb-image</a> 200 300)))
(<strong>resize</strong> img 400 400))
;;; =&gt;
IMAGE: width: 400, height: 400
NAMED-OBJECT: id: NIL, tag: NIL, 
data: #&lt;RGB-IMAGE (400x400) {70067BAB33}&gt;
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>resize</strong> ((img <a href="#robo11">image</a>) new-width new-height
                   &amp;key (interpolation
                         (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-interpolation)))
</pre>

<hr />
<a name="image2fscale"></a>
<a name="robo49"></a><h2>image/scale [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo11">image</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2024-03-01
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This methods scales an <a href="#robo11">image</a> object according to the scaling facors given as
 arguments. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> - The <a href="#robo11">image</a> object.
 - A number being the width-scaler.
 - A number being the height-scaler. 
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword-arguments:
 - :interpolation. The interpolation method to be used for altering the
   dimensions. Default = (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-interpolation)
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The modified <a href="#robo11">image</a> object. 
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((img (<a href="#robo47">make-rgb-image</a> 200 300)))
(<strong>scale</strong> img 1.5 2.0))
;;; =&gt;
IMAGE: width: 300, height: 600
NAMED-OBJECT: id: NIL, tag: NIL, 
data: #&lt;RGB-IMAGE (300x600) {7006A8E413}&gt;
**********
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>scale</strong> ((img <a href="#robo11">image</a>) width-factor height-factor
                  &amp;key (interpolation
                        (<a href="./globals_lisp.html#robo37">get-apr-config</a> :default-interpolation)))
</pre>

<hr />
<a name="image2fwrite2djpg"></a>
<a name="robo50"></a><h2>image/write-jpg [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo11">image</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2024-03-01
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This method writes the content of the data-slot of an <a href="#robo11">image</a> object to a
 jpg-file. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> The <a href="#robo11">image</a> object. 
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword-arguments:
 - :outfile. The output filename. Default = "/tmp/<a href="#robo11">image</a>.jpg"
 - :quality. The quality of the output as an integer (0&lt;=q&lt;=100), where 100
   means best quality. Default = 100.
 - :overwrite? Overwrite an existing outfile (when T). Default = T
 - :warn? Then T, additional warnings are printed.
   Default = (<a href="./globals_lisp.html#robo37">get-apr-config</a> :verbose)
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The outfile path (string).
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((img1 (<a href="#robo47">make-rgb-image</a> 200 300))
(img2 (<a href="#robo47">make-rgb-image</a> 30 30 :initial-color (make-color 20 90 111))))
(<a href="#robo43">copy</a> img1 img2 :height 10 :width 10
:dest-x 20 :dest-y 25)
(<strong>write-jpg</strong> img1))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>write-jpg</strong> ((img <a href="#robo11">image</a>) &amp;key
                                    (outfile "/tmp/<a href="#robo11">image</a>.jpg")
                                    (quality 100)
                                    (overwrite? t)
                                    (warn? (<a href="./globals_lisp.html#robo37">get-apr-config</a> :verbose)))
</pre>

<hr />
<a name="image2fwrite2dpng"></a>
<a name="robo51"></a><h2>image/write-png [ Methods ]</h2>

<p>[ <a href="#robo_top_of_doc">Top</a> ] [ <a href="#robo11">image</a> ] [ <a href="./robo_methods.html#robo_top_of_doc">Methods</a> ]</p>
<p class="item_name">AUTHOR</p>
<pre> Ruben Philipp &lt;me@rubenphilipp.com&gt;
</pre>
<p class="item_name">CREATED</p>
<pre> 2024-03-01
</pre>
<p class="item_name">DESCRIPTION</p>
<pre> This method writes the content of the data-slot of an <a href="#robo11">image</a> object to a
 png-file. 
</pre>
<p class="item_name">ARGUMENTS</p>
<pre> The <a href="#robo11">image</a> object. 
</pre>
<p class="item_name">OPTIONAL ARGUMENTS</p>
<pre> keyword-arguments:
 - :outfile. The output filename. Default = "/tmp/<a href="#robo11">image</a>.png"
</pre>
<p class="item_name">RETURN VALUE</p>
<pre> The path to the output file. 
</pre>
<p class="item_name">EXAMPLE</p>
<pre class="source">(let ((img1 (<a href="#robo47">make-rgb-image</a> 200 300))
(img2 (<a href="#robo47">make-rgb-image</a> 30 30 :initial-color (make-color 20 90 111))))
(<a href="#robo43">copy</a> img1 img2 :height 10 :width 10
:dest-x 20 :dest-y 25)
(<strong>write-png</strong> img1))
</pre>
<p class="item_name">SYNOPSIS</p>
<pre class="source">(defmethod <strong>write-png</strong> ((img <a href="#robo11">image</a>) &amp;key (outfile "/tmp/<a href="#robo11">image</a>.png"))
</pre>

</div> <!-- content -->
<div id="footer">
<p>Generated from ./src/image.lisp with <a href="http://www.xs4all.nl/~rfsber/Robo/robodoc.html">ROBODoc</a> V4.99.44 on 2024-04-24 21:56:39</p>
</div> <!-- footer -->
</body>
</html>
